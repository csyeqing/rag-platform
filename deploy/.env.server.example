# ===========================================
# RAG Web MVP 一键部署配置
# ===========================================

# Compose 项目名称
PROJECT_NAME=rag

# 服务端口（Nginx 统一入口）
FRONTEND_PORT=80

# ===========================================
# 数据库配置
# ===========================================
POSTGRES_DB=rag_mvp
POSTGRES_USER=rag
# 默认数据库密码设置为 rag
POSTGRES_PASSWORD=rag

# ===========================================
# 后端应用配置
# ===========================================
APP_NAME=RAG Web MVP
APP_ENV=production
SECRET_KEY=change_me_to_a_long_random_secret_at_least_32_chars
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=120
# 允许跨域的域名列表。请将 "http://your-server-ip" 替换为实际服务器 IP
CORS_ORIGINS=["http://localhost", "http://127.0.0.1", "http://124.220.38.238"]

# 默认管理员账号（首次部署时创建）
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=change_me_admin_password

# ===========================================
# Embedding 配置
# ===========================================
# local  -> 使用本地模型 (BAAI/bge-m3)
# remote -> 使用远程 API（需配置下方 ENDPOINT_URL 和 API_KEY）
# hash   -> 仅用于测试（精度低）
EMBEDDING_BACKEND=local
DEFAULT_EMBEDDING_DIM=1536
EMBEDDING_MODEL_NAME=BAAI/bge-m3
# 强制使用 CPU
EMBEDDING_LOCAL_DEVICE=cpu
EMBEDDING_BATCH_SIZE=16
EMBEDDING_FALLBACK_HASH=true

# 远程 Embedding 配置（仅当 EMBEDDING_BACKEND=remote 时使用）
EMBEDDING_PROVIDER_TYPE=openai_compatible
EMBEDDING_ENDPOINT_URL=
EMBEDDING_API_KEY=

# ===========================================
# RAG 命中判定阈值（可根据业务调优）
# ===========================================
RAG_MIN_TOP1_SCORE=0.30
RAG_MIN_SUPPORT_SCORE=0.18
RAG_MIN_SUPPORT_COUNT=2
RAG_MIN_ITEM_SCORE=0.10
RAG_GRAPH_MAX_TERMS=12

# ===========================================
# 前端配置
# ===========================================
VITE_API_BASE_URL=/api
